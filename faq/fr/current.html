<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>Suivre la version de développement "-current"</title>
<link rev= "made" href= "mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name= "resource-type" content= "document">
<meta name= "description"   content= "the OpenBSD FAQ page">
<meta name= "keywords"      content= "openbsd,faq">
<meta name= "distribution"  content= "global">
<meta name= "copyright"     content= "This document copyright 2005-2009 by OpenBSD">
</head>

<body bgcolor= "#ffffff" text= "#000000">
<a href="../../fr/index.html">
<img alt="[OpenBSD]" height=30 width=141 src="../../images/smalltitle.gif" border="0">    
</a>
<p>
<font color= "#0000e0">
<a href= "index.html">[Index de la FAQ]</a>
</font>

<p>

<h1><font color="#e00000">Suivre la version de développement "<i>-current</i>"</font></h1>
<hr>

<h3>Table des matières</h3>
<p>
<ul>
<li><a href="#Intro">Introduction</a>
<!-- Les entrées les plus vieilles en haut... -->
<li><a href="#20090721">2009/07/01 - [ports] Nouvelle version de postgresql</a>
<li><a href="#20090724">2009/07/24 - activation du modèle thread posix pour 
gcc 3</a>
<li><a href="#20090725">2009/07/25 - changement de nommage dans les
périphériques audio et MIDI</a>
<li><a href="#20090726">2009/07/26 - retour arriére sur le modèle thread posix 
pour gcc 3</a>
<li><a href="#20090801">2009/08/01 - changement de syntaxe dans ripd(8) et
fonction par défaut "split-horizon"</a>
<li><a href="#20090818">2009/08/18 - changement du mode de fonctionnement par 
défaut dans sysmerge(8)</a>
<li><a href="#20090826">2009/08/26 - changement de gestion des redirections
auto-fetch dans ftp(1)</a>
<li><a href="#20090901">2009/09/01 - changements dans la traduction
d'adresse de pf(4)</a>
<li><a href="#20090902">2009/09/02 - changement de syntaxe dans pf(4) de 
route-to/reply-to</a>
<li><a href="#20090904">2009/09/04 - vérification de syntaxe supplémentaire
dans bgpd(8), dvmrpd(8)</a>
<li><a href="#20091001">2009/10/01 - [ports] mise à jour majeure de Bacula</a>
<li><a href="#20091006">2009/10/06 - changement dans la capacité de
l'annonce dans bgpd(8)</a>
<li><a href="#20091019">2009/10/19 - nouveau config(8) nécessaire pour
compiler un noyau</a>
<li><a href="#20091021">2009/10/21 - deux paquetages sont inclus dans perl 5.10.1</a>
<li><a href="#20091025">2009/10/25 - iwn(4) nécessite une mise à jour du
paquetage firmware</a>
<li><a href="#20091103">2009/11/03 - pflogd(3) nécessite une nouvelle
méthode de rotation de fichier log</a>
<li><a href="#20091122">2009/11/22 - brconfig(8)/bridgename.if(5) remplacé
par ifconfig(8)/hostname.if(5)</a>
<li><a href="#20091213">2009/12/13 - [ports] Nouvelle version de asterisk et
app_conference</a>
<li><a href="#20091220">2009/12/20 - Makefile.yp(8) supporte mknetid(8) -P</a>
<li><a href="#20100110">2010/01/10 - changement incompatible dans IPsec/HMAC-SHA2</a>
<li><a href="#20100203">2010/02/03 - mise à jour de make(1) nécessaire</a>
<li><a href="#20100326">2010/03/26 - changement des metadatas dans softraid(4)</a>
<li><a href="#20100323">2010/03/23 - [ports] Mise à jour majeure de Dovecot</a>
<li><a href="#20100402">2010/04/03 - mandoc(1) nécessaire maintenant</a>
<!-- Les nouvelles additions se mettent en bas, merci -->
</ul>
    
<hr>

<a name="Intro"></a>
<!-- XXXversion -->
<h2>Introduction</h2>
Ce document est pour les personnes souhaitant suivre la version de
développement d'OpenBSD; celle-ci sera nommée <i>-current</i> dans la
suite de ce texte. Il contient des informations sur les changements
apportés entre la version 4.6-release et <i>-current</i>, et ne devrait
PAS être utilisé par quiconque voulant faire une mise à jour à partir
des versions 4.5 ou précédentes ou même par les personnes souhaitant
suivre <a href="../../fr/stable.html"><i>-stable</i></a>.

<p>
Si vous voulez passer vers la version 4.6-release ou 4.6-stable à partir
de versions antérieures, consulter le <a href="../upgrade46.html">guide de
mise à niveau</a>.

<p>
Soyez certain d'avoir lu et compris la
<a href="faq5.html">FAQ 5 - Construire le Système à partir des Sources</a>
avant d'utiliser -current et les instructions qui suivent.

<p>
Vous devriez TOUJOURS partir d'un "snapshot" pour suivre
<i>-current</i>. Une mise à jour via la compilation des sources n'est
pas supportée.
   
<p>
Si vous souhaitez avoir des informations pour mettre à jour en partant de
versions plus anciennes, consultez le document
<a href="upgrade-old.html">upgrade-old.html</a>.
Celui-ci est fourni en tant que document historique -- il ne DOIT PAS
servir de procédure de mise à jour.

<p>
<a name="20090721"></a>
<h3>2009/07/21 - [ports]  Nouvelle version de postgresql</h3>
La nouvelle version de postgresql nécessite que vos bases de données soient
exportées avant la mise à jour et rechargées aprés.

<p>
<a name="20090724"></a>
<h3>2009/07/24 - activation du modèle thread posix pour gcc 3</h3>
Ce changement a été repris. Aucune étape spéciale ne sont plus nécessaires à
présent.

<p>
<a name="20090725"></a>
<h3>2009/07/25 - changement de nommage dans les périphériques audio et MIDI</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sndio&amp;sektion=7">sndio(7)</a>
utilise maintenant un schéma différent pour le nommage des périphérique
audio et MIDI. L'ancien système de nommage continuera de fonctionner encore
quelques temps, il est recommandé de commencer à mettre à jour les fichiers
de configuration ou scripts d'applications en utilisant
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sndio&amp;sektion=7">sndio(7)</a>,
comme ci-dessous :

<ul>
<li>Convertir des noms d'anciens périphériques en nouveaux, par exemple :
<pre>
     /dev/audio0   --&gt;   sun:0
     /dev/audio1   --&gt;   sun:1
     /dev/rmidi2   --&gt;   rmidi:2
     default       --&gt;   aucat:0
     mystuff       --&gt;   aucat:0.mystuff
</pre>
<li>Si de multiples instances de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=aucat&amp;sektion=1">aucat(1)</a>
fonctionnent, l'option -U doit être utilisée pour assigner un numéro d'unité
au processus aucat(1). Pour les instances, les commandes suivantes :
<pre>
     $ aucat -U 0 -l -f sun:3
     $ aucat -U 1 -l -s default -s mystuff -f sun:2
</pre>
fourniront <tt>aucat:0</tt>, <tt>aucat:1</tt> et <tt>aucat:1.mystuff</tt>
respectivement.
</ul>

<p>
<a name="20090726"></a>
<h3>2009/07/26 - retour arriére sur le modèle thread posix pour gcc 3</h3>
Pour les utilisateurs qui ont mis à jour userland pour activer le modèle
thread posix pour gcc 3, suivre ces étapes pour mettre à jour. Sinon aucune
étape n'est nécessaire.
<ul>
<li>Compiler et installer gcc:
<pre>
     # cd /usr/src/gnu/usr.bin/gcc
     # make -f Makefile.bsd-wrapper obj
     # make -f Makefile.bsd-wrapper depend
     # make -f Makefile.bsd-wrapper
     # make -f Makefile.bsd-wrapper install
     # make -f Makefile.bsd-wrapper clean
</pre>
<li><a href="faq5.html#BldUserland">Compiler et installer userland</a>
</ul>

<p>
<a name="20090801"></a>
<h3>2009/08/01 - changement de syntaxe dans ripd(8) et fonction par défaut "split-horizon"</h3>
<ul>
<li>Les valeurs acceptées pour "split-horizon" dans 
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ripd.conf&sektion=5">ripd.conf(5)</a>
sont maintenant :
none, simple, poisoned.
<br>
Le paramétre par défaut utilisé pour forcer le "split horizon" simple
sans "poisoned reverse", est maintenant remplacé par "simple".
<li>Le comportement par défaut de "split horizon" est maintenant activé pour "poisoned
reverse" à la place de "none".
</ul>

<p>
<a name="20090818"></a>
<h3>2009/08/18 -  changement du mode de fonctionnement par défaut dans sysmerge(8)</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=sysmerge&sektion=8">sysmerge(8)</a>
fonctionne maintenant en auto-mode par défaut.<br>
L'option "-a" a été remplacée par "-b" qui peut-être utilisée pour obtenir 
l'ancien comportement (mode diff complet).

<p>
<a name="20090826"></a>
<h3>2009/08/26 - changement de gestion des redirections auto-fetch dans ftp(1)</h3>
Dans <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp&sektion=1">ftp(1)</a>,
quand la récupération automatique (opération en ligne de commande) est utilisée sans
spécifier un nom de fichier avec <tt>-o</tt>, le fichier est maintenant
toujours sauvegardé sous le nom dérivé de la ligne de commande. Le comportement 
précédent était de générer le nom du fichier de l'URL de redirection.

<p>
<a name="20090901"></a>
<h3>2009/09/01 - changements dans la traduction d'adresse de pf(4)</h3>
Comme expliqué plus en détail dans 
<a href="http://marc.info/?l=openbsd-misc&m=125181847818600&w=2">ce
post de liste de diffusion</a>, les règles séparées nat/rdr/binat (traduction)
de PF ont été remplacées avec des actions sur des règles régulières
match/filter.
Les jeux de règles simples peuvent être convertis comme ceci :<p>

<pre>   nat on $ext_if from 10/8 -&gt; ($ext_if)
   rdr on $ext_if to ($ext_if) -&gt; 1.2.3.4</pre>
devient<br>
<pre>   match out on $ext_if from 10/8 nat-to ($ext_if)
   match in on $ext_if to ($ext_if) rdr-to 1.2.3.4</pre><p>
 
et...

<pre>   binat on $ext_if from $web_serv_int to any -&gt; $web_serv_ext</pre>
devient<br>
<pre>   match on $ext_if from $web_serv_int to any binat-to $web_serv_ext</pre>
   
les lignes nat-anchor et/ou rdr-anchor, comme pour
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=relayd">relayd(8)</a>,
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ftp-proxy">ftp-proxy(8)</a>
et <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=tftp-proxy">tftp-proxy(8)</a>,
ne sont plus utilisées et doivent être supprimées de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf">pf.conf(5)</a>,
laissant uniquement les lignes d'ancres. Les règles de traduction pour ceux-ci et
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=spamd">spamd(8)</a>
devront être mises à jour de façon appropriées.<p>

N.B. : Précédemment, les règles de traduction avaient un comportement "stop 
at first match", avec binat évalué en premier, suivi par nat/rdr dépendant de 
la direction du paquet.
Maintenant que les règles de filtrage ont un comportement normal "last match", 
il faut donc être prudent avec l'ordre des règles lors de la conversion.

<p>
<a name="20090902"></a>
<h3>2009/09/02 - changement de syntaxe dans pf(4) de route-to/reply-to</h3>
Les options route-to, reply-to, dup-to et fastroute de pf.conf
sont déplacées en filteropts :
<pre>   pass in on $ext_if route-to (em1 192.168.1.1) from 10.1.1.1
   pass in on $ext_if reply-to (em1 192.168.1.1) to 10.1.1.1</pre>
devient<br>
<pre>   pass in on $ext_if from 10.1.1.1 route-to (em1 192.168.1.1)
   pass in on $ext_if to 10.1.1.1 reply-to (em1 192.168.1.1)</pre>

<p>
<a name="20090904"></a>
<h3>2009/09/04 - vérification de syntaxe supplémentaire
dans bgpd(8), dvmrpd(8)</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd">bgpd(8)</a>
et <a href="http://www.openbsd.org/cgi-bin/man.cgi?query=dvmrpd">dvmrpd(8)</a>
vérifie maintenant de manière stricte si autre chose que yes ou no est
utilisé dans des token yes/no. Si la syntaxe que vous utilisez est
incorrecte (par exemple utiliser "announce capabilities none" à la place de 
"no") cela produira une erreur au démarrage au lieu de démarrer
silencieusement avec une fonctionnalité incorrecte.

<p>
<a name="20091001"></a>
<h3>2009/10/01 - [ports] mise à jour majeure de Bacula</h3>
Bacula a été mis à jour de 2.4.4 vers 3.0.2; il posséde un nouveau format de
catalogue qui necessite un changement de schéma dans la base de données sur
le director. L'
<a href="http://permalink.gmane.org/gmane.os.openbsd.ports.cvs/39031">entrée
sur le journal des commit</a> et la
<a href="http://sourceforge.net/project/shownotes.php?release_id=674473">note
sur la version</a> fournissent plus de détails.

Les composants serveur (daemons de stockage et director) ne sont pas
compatibles entre versions majeures et doivent être mis à jour ensemble.

<ul>
<li>les composants serveurs 3.x (sd/dir) <b>sont</b> compatibles avec les
anciens clients 2.4.x.
<li>les clients 3.x <b>ne</b> sont <b>pas</b> compatibles avec les composants serveur 2.4.x.
</ul>

<p>
<a name="20091006"></a>
<h3>2009/10/06 - changement dans la capacité de l'annonce dans bgpd(8)</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=bgpd">bgpd(8)</a>
annonce maintenant 4-byte ASN et redémarre en douceur les capacités par
défaut.
Précedemment le redémarrage en douceur n'était pas annoncé par défaut, et le
support 4-byte ASN était seulement annoncé quand un ou un autre peer utilisé
un ASN supérieur à 65535. Il y a maintenant un contrôle par session sur quelles
capacités sont annoncées :
<pre>   
   announce refresh yes # was already on by default
   announce restart no
   announce as-4byte no # was only set on sessions to peers with 4byte AS nums 
</pre>

<p>
<a name="20091019"></a>
<h3>2009/10/19 -  nouveau config(8) nécessaire pour compiler un noyau</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=config">config(8)</a>
a été modifié. Vous devez installer une nouvelle version avant de compiler
un nouveau aprés une mise à jour des sources.
<pre>
   # cd /usr/src/usr.sbin/config
   # make
   # make install</pre>
 
<p>
<a name="20091021"></a>
<h3>2009/10/21 - deux paquetages sont inclus dans perl 5.10.1</h3>
p5-parent et p5-Parse-CPAN-Meta sont maintenant inclus dans Perl de base.
Si vous avez installé ces paquetages, supprimez les.
<pre>
   # pkg_delete p5-parent p5-Parse-CPAN-Meta </pre>
  
<p>
<a name="20091025"></a>
<h3>2009/10/25 - iwn(4) nécessite une mise à jour du paquetage firmware</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=iwn">iwn(4)</a>
nécessite maintenant le paquetage iwn-firmware en version 5.2.
Vous pouvez installer le paquetage iwn-firmware-5.2 ainsi :
<pre>
   # pkg_add http://damien.bergamini.free.fr/packages/openbsd/iwn-firmware-5.2.tgz
</pre>

<p>
<a name="20091103"></a>
<h3>2009/11/03 - pflogd(8) nécessite une nouvelle méthode de rotation de fichier log</h3>
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pflogd">pflogd(8)</a>
a perdu son option <tt>-p</tt>. Changez <tt>/etc/newsyslog.conf</tt> pour
inclure :
<pre>
   /var/log/pflog	600  3     250  *     ZB "pkill -HUP -u root -U root -t - -x pflogd"
</pre>

<p>
<a name="20091122"></a>
<h3>2009/11/22 - brconfig(8)/bridgename.if(5) remplacé par ifconfig(8)/hostname.if(5)</h3>
La fonctionnalité de
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=brconfig">brconfig(8)</a>
a été intégrée dans
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=ifconfig">ifconfig(8)</a>.
Comme l'argument de <tt>priorité</tt> pour configurer la priorité du spanning tree
sur un bridge est en conflit avec la priorité sur une interface ifconfig(8),
il a été renommé <tt>spanpriority</tt>.
<p>
Les fichiers existants /etc/bridgename.bridge* doivent être remplacés par
des fichiers /etc/hostname.bridge*; si vous utilisez une <tt>priorité</tt>,
remplacez la par <tt>spanpriority</tt>.

<p>
<a name="20091213"></a>
<h3>2009/12/13 - [ports] Nouvelle versiob de asterisk et app_conference</h3>
Le paquetage Asterisk a été mis à jour en 1.6.0.x, vous devrez faire des
modifications dans la configuration; merci de regarder
/usr/local/share/doc/asterisk/UPGRADE-16.txt.
L'ancien plugin app_conference est incompatible avec la nouvelle version, vous
devez utiliser appkonference à la place.

<p>
<a name="20091220"></a>
<h3>2009/12/20 - Makefile.yp(8) supporte mknetid(8) -P</h3>
Sur des hôtes serveur YP, fusionnez
<a href="http://www.openbsd.org/cgi-bin/cvsweb/src/usr.sbin/ypserv/ypinit/Makefile.yp#rev1.15">Makefile.yp
rev. 1.15</a>
dans toutes vos copies de Makefile YP, <tt>/var/yp/*/Makefile</tt>.
Strictement parlant, c'est seulement nécessaire si vous avez configuré la
variable DIR dans un répertoire source YP non standard ET que vous ne
fournissez pas de fichier passwd(5) dans vos répertoires sources YP. Pour un
maximum de sécurité pour ne pas perdre d'informations sur les groupes de
<tt>/etc/master.passwd</tt> dans votre table YP netid(5), il est recommandé
que tous les serveurs hôtes soient mis à jour.

<a name="20100110"></a>
<h3>2010/01/10 - changement incompatible dans IPsec/HMAC-SHA2</h3>
Deux bogues dans
<a href="http://marc.info/?l=openbsd-cvs&m=126312766621593&w=2">IPsec/HMAC-SHA2</a>
ont été corrigés, ce qui fait qu'il y a une incompatibilité des algorithmes
de hash HMAC-SHA-256/384/512 avec les versions précédentes de OpenBSD et 
d'autres implémentations IPsec partageant les bogues. 
En particulier l'algorithme d'authentification par défaut HMAC-SHA-256 est 
affecté.
Il faut donc mettre à jour des deux cotés à la fois, ou utiliser un autre
algorithme d'authentification pendant la transition.
Le dépassement par-paquet a augmenté; si vous optimisez le MSS à une valeur 
exacte (par exemple sans être vague), cela devra être recalculé.

<a name="20100203"></a>
<h3>2010/02/03 - mise à jour de make(1) nécessaire</h3>
Des changements dans l'infrastructure de compilation pour contruire le port
<a href="../../loongson.html">OpenBSD/loongson</a> nécessite l'utilisation d'un
nouveau binaire pour make(1), fournissant la variable <tt>MACHINE_CPU</tt>
aux Makefiles.
Vous devez installer une nouvelle version avant de recompiler le userland
avec les dernières sources mises à jour.
<pre>
   # cd /usr/src/usr.bin/make
   # make depend
   # make
   # make install</pre>

<p>
<a name="20100326"></a>
<h3>2010/03/26 - Changement des metadatas dans softraid(4)</h3>
Le format des metadatas dans
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=softraid&sektion=4">softraid(4)</a>
a été modifié et il n'est plus compatible avec les précédentes versions.
Ce qui fait que tous les volumes crées avec un ancien noyau ne seront pas
assemblés.
Les données sur les volumes existants doivent être sauvegardés avant de
mettre à jour.
Le volume devra alors être recrée et les données restaurées.

<a name="20100323"></a>
<h3>2010/03/23 - [Ports] Mise à jour majeure de Dovecot</h3>
Dovecot a été mis à jour de la version 1.1.20 à la 1.2.11. Le fichier de
configuration a été modifié et l'ancien plugin cmusieve a été retiré en
faveur de la nouvelle implémentation sieve de Dovecot. L'
<a href="http://permalink.gmane.org/gmane.os.openbsd.ports.cvs/42080">entrée
dans les logs du commit</a> donne plus de détails.

<a name="20100403"></a>
<h3>2010/04/03 - mandoc(1) nécessaire maintenant</h3>
mandoc(1) a été ajouté dans l'arbre de compilation, et il est maintenant
necéssaire pour compiler le système. Si vous ne l'avez pas :
<pre>
    # cd /usr/src/usr.bin/mandoc
    # make obj
    # NOMAN= make && NOMAN= make install
</pre>

<hr>
<a href= "index.html"><img height= "24" width= "24" src= "../../images/back.gif" border= "0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: current.html,v 1.199 ]<br>
$Translation: current.html,v 1.122 2010/04/04 06:34:19 benoit Exp $<br>
-->
$OpenBSD: current.html,v 1.79 2010/04/04 18:48:32 ajacoutot Exp $
</small>

</body>
</html>
