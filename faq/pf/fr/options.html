<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>PF : Options de Fonctionnement</title>
<link rev="made" href="mailto:www@openbsd.org">
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<meta name="resource-type" content="document">
<meta name="description"   content="the OpenBSD FAQ page">
<meta name="keywords"      content="openbsd,faq,pf">
<meta name="distribution"  content="global">
</head>

<!--
Copyright (c) 2003-2007 Joel Knight <enabled@myrealbox.com>

Permission to use, copy, modify, and distribute this documentation for
any purpose with or without fee is hereby granted, provided that the
above copyright notice and this permission notice appear in all copies.

THE DOCUMENTATION IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL
WARRANTIES WITH REGARD TO THIS DOCUMENTATION INCLUDING ALL IMPLIED
WARRANTIES OF MERCHANTABILITY AND FITNESS. IN NO EVENT SHALL THE
AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT, INDIRECT, OR CONSEQUENTIAL
DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM LOSS OF USE, DATA OR
PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR OTHER
TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS DOCUMENTATION
-->

<body bgcolor="#ffffff" text="#000000">
<!-- Passes validator.w3.org, please keep it this way;
please, use a max of 72 chars per line -->

<a href="../../../fr/index.html">
<img alt="[OpenBSD]" height="30" width="141" src="../../../images/smalltitle.gif" border="0">
</a>
<p>
[<a href="shortcuts.html">Précédent : Raccourcis pour La
Création des Jeux de Règles</a>]
[<a href="index.html">Index</a>]
[<a href="anchors.html">Suivant : Ancres</a>]

<p>
<h1><font color="#e00000">PF : Options de Fonctionnement</font></h1>

<hr>

<p>
Des options sont utilisées pour contrôler le fonctionnement
de PF. Celles-ci sont spécifiées dans le fichier
<tt>pf.conf</tt> en utilisant la directive <tt>set</tt>.

<p>
<b><font color="#ff0000">REMARQUE :</font></b> A partir d'OpenBSD 3.7,
le comportement des options de lancement a changé.
Auparavant, lorsqu'une option était utilisée, elle n'était jamais remise
à sa valeur par défaut, sauf si le jeu de règles était rechargé.
A présent, à chaque fois qu'un jeu de règles est chargé, les options de
lancement sont remises à leurs valeurs par défaut avant que le jeu de
règles ne soit analysé.
Ainsi, si une option est activée puis désactivée depuis le jeu de règles
et que le jeu de règles est rechargé, l'option sera remise à sa valeur
par défaut.

<a name="block-policy"></a>
<p>
<dl>
<dt><tt>set block-policy <i>option</i></tt><br>
<dd>Paramètre le comportement par défaut des
    règles de <a href="filter.html">filtrage</a> qui ont pour
    effet de bloquer les paquets (mot-clé "<tt>block</tt>").
<ul>
<li><tt>drop</tt> - Le paquet est détruit sans aucune
    notification.
<li><tt>return</tt> - un paquet TCP RST est renvoyé pour les
    paquets TCP et un paquet ICMP Unreachable est renvoyé pour
    tous les autres.
</ul>
<dd>Il est à noter que les règles de filtrage
    individuelles peuvent avoir leur propre réponse.
    <tt>drop</tt> est l'option par défaut.
</dl>

<a name="debug"></a>
<p>
<dl>
<dt><tt>set debug <i>option</i></tt><br>
<dd>Permet de paramétrer le niveau de débogage de pf.
<ul>
<li><tt>none</tt> - aucun message de débogage n'est
    affiché.
<li><tt>urgent</tt> - messages de débogage
    générés pour les erreurs sérieuses.
<li><tt>misc</tt> - messages de débogage
    générés pour des erreurs diverses (par exemple
    pour voir le statut du sous-système scrub et pour les
    échecs de création d'état).
<li><tt>loud</tt> - messages de débogage
    générés dans des conditions courantes (par
    exemple pour voir le statut de l'analyseur passif de signatures OS).
</ul>
    <dd><tt>urgent</tt> est l'option par défaut.
</dl>

<a name="fingerprints"></a>
<p>
<dl>
<dt><tt>set debug <i>option</i></tt><br>
<dd>Permet de paramétrer le fichier à partir duquel seront chargées les
    signatures de systèmes d'exploitation. Utilisé avec <a
    href="filter.html#osfp">l'analyse passive de l'empreinte des OS</a>.
    La valeur par défaut est <tt>/etc/pf.os</tt>.
</dl>

<a name="limit"></a>
<p>
<dl>
<dt><tt>set fingerprints <i>file</i></tt><br>
<dd>Permet de paramétrer différentes limites.
<ul>
<li><tt>frags</tt> - nombre maximal d'entrées dans la zone mémoire
    utilisée pour le réassemblage de paquets (règles
    scrub). La valeur par défaut est 5000.
<li><tt>src-nodes</tt> - nombre maximal des entrées dans la zone mémoire
    utilisée pour assurer un suivi des adresses IP sources (généré par
    les options <tt>sticky-address</tt> et <tt>source-track</tt>). La
    valeur par défaut est 10000.
<li><tt>states</tt> - nombre maximal d'entrées dans la zone mémoire
    utilisée pour les entrées de la table d'état (règles de <a
    href="filter.html">filtrage</a> qui contiennent le mot-clé
    <tt>keep state</tt>). La valeur par défaut est 10000.
<li><tt>tables</tt> - nombre maximal de tables <a
    href="tables.html">tables</a> pouvant être créées. La valeur par
    défaut est 1000.
<li><tt>table-entries</tt> - La limite globale du nombre d'adresses
    pouvant être stockées dans toutes les tables. La valeur par défaut
    est 200000.
    Si le système à moins de 100 Mo de mémoire physique, la valeur par
    défaut est fixée à 100000.
</ul>
</dl>

<a name="loginterface"></a>
<p>
<dl>
<dt><tt>set loginterface <i>interface</i></tt><br>
<dd>Paramètre l'interface pour laquelle PF devra récupérer des
    statistiques telles que le nombre d'octets entrants/sortant les
    paquets acceptés/bloqués. Les statistiques ne peuvent être
    récupérées que pour <i>une</i> interface à la fois. Il est à noter
    que les indicateurs <tt>match</tt>, <tt>bad-offset</tt>, etc... et
    les indicateurs de la table d'état sont enregistrés que
    <tt>loginterface</tt> soit positionnée ou pas.
    Pour désactiver cette option, positionnez la à <tt>none</tt>.
    <tt>none</tt> est l'option par défaut.
</dl>

<a name="optimization"></a>
<p>
<dl>
<dt><tt>set optimization <i>option</i></tt><br>
<dd>Optimise PF pour l'un de ces environnements réseau :
<ul>
<li><tt>normal</tt> - convient à pratiquement tous les
    réseaux.
<li><tt>high-latency</tt> - réseaux à haute latence tels
    que les réseaux à connexion satellite.
<li><tt>aggressive</tt> - les connexions expirent plus rapidement de la
    table d'état. Les pré-requis mémoire sont ainsi
    fortement réduits sur un pare-feu particulièrement
    chargé au risque de terminer des connexions inactives trop
    rapidement.
<li><tt>conservative</tt> - paramétrage extrêmement
    conservateur. Contrairement à aggressive, ce
    paramétrage évite de terminer les connexions inactives
    ce qui se traduit par une plus grande utilisation mémoire et
    une utilisation du processeur un peu plus soutenue.
</ul>
<dd><tt>normal</tt> est l'option par défaut.
</dl>

<a name="ruleset-optimization"></a>
<p>
<dl>
<dt><tt>set ruleset-optimization <i>option</i></tt>
<dd>Contrôle le fonctionnement de l'optimiseur de jeu de règles PF.
<ul>
<li><tt>none</tt> - désactive complètement l'optimiseur.
<li><tt>basic</tt> - active les optimisations suivantes :
	<ol>
	<li>suppression des règles dupliquées
        <li>suppression des règles qui sont un sous-ensemble d'une autre
            règle
        <li>rassemblement de multiples règles dans une table lorsque
            c'est avantageux
        <li>réordonnancement des règles afin d'améliorer les
            performances de l'évaluation de ces dernières
        </ol>
<li><tt>profile</tt> - utilise le jeu de règles utilisé comme profil de
    feedback pour façonner l'ordonnancement des règles contenant le mot-
    clé "quick" selon le trafic réseau réel.
</ul>
<dd>Depuis OpenBSD 4.2, la valeur par défaut est <tt>basic</tt>.
Veuillez consulter
<a href="http://www.openbsd.org/cgi-bin/man.cgi?query=pf.conf&amp;sektion=5&amp;manpath=OpenBSD+4.6"
>pf.conf(5)</a> pour une description plus complète.
</dl>

<a name="skip"></a>
<p>
<dl>
<dt><tt>set skip on <i>interface</i></tt><br>
<dd>Saute <i>tous</i> les traitements PF sur
l'<tt><i>interface</i></tt>.
Ceci peut être utile sur une interface de loopback pour laquelle le
filtrage, la normalisation, la mise en queue, etc... ne sont pas
nécessaires. Elle peut être utilisée plusieurs fois.
Elle n'est pas activée par défaut.
</dl>

<a name="state-policy"></a>
<p>
<dl>
<dt><tt>set state-policy <i>option</i></tt><br>
<dd>Permet de paramétrer le comportement de PF vis-à-vis
    de la préservation de l'état des connexions. Ce
    comportement peut être contourné au niveau de chaque
    règle. Pour plus de détails, consultez la section de
    la FAQ intitulée
    <a href="filter.html#state">Préservation de l'État</a>.
<ul>
<li><tt>if-bound</tt> - les états sont liés à l'interface sur lesquels
    ils ont été créés. Si le trafic correspond à une entrée de la table
    d'états mais qu'il ne traverse pas l'interface sur laquelle l'état a
    été enregistré, cette correspondance est rejetée. Le paquet doit
    alors correspondre à une règle de filtrage ou il sera tout
    simplement détruit/rejeté.
<li><tt>floating</tt> - les états peuvent correspondre à des paquets
    sur n'importe quelle interface. Peu importe l'interface qu'il
    traverse, un paquet sera accepté tant qu'il correspond à une
    entrée dans la table d'états et qu'il transite dans le même sens
    qu'il le fit initialement lors de la création de l'état, peu importe
    l'interface qu'il traverse, il passera.
</ul>
<dd><tt>floating</tt> est l'option par défaut.
</dl>

<a name="timeout"></a>
<p>
<dl>
<dt><tt>set timeout <i>option value</i></tt><br>
<dd>Permet de paramétrer différents timeouts (en secondes).
<ul>
<li><tt>interval</tt> - nombre de secondes entre les purges d'états
    expirés et des fragments de paquets.
    La valeur par défaut est <tt>10</tt>.
<li><tt>frag</tt> - nombre de secondes avant qu'un fragment non assemblé
    n'expire.
    La valeur par défaut est <tt>30</tt>.
<li><tt>src.track</tt> - nombre de secondes pendant lesquelles garder
    l'entrée <a href="filter.html#stateopts">source tracking</a> en
    mémoire après que le dernier état ait expiré.
    La valeur par défaut est <tt>0</tt> (zero).
</ul>
</dl>

<p>
Exemple :
<p>
<table border=0 width="650">
<tr><td nowrap bgcolor="#EEEEEE">
<pre>
set timeout interval 10
set timeout frag 30
set limit { frags 5000, states 2500 }
set optimization high-latency
set block-policy return
set loginterface dc0
set fingerprints "/etc/pf.os.test"
set skip on lo0
set state-policy if-bound
</pre>
</td></tr>
</table>


<p>
[<a href="shortcuts.html">Précédent : Raccourcis pour La création des
Jeux de Règles</a>]
[<a href="index.html">Index</a>] 
[<a href="anchors.html">Suivant : Ancres</a>]

<p>
<hr>
<a href="index.html"><img height="24" width="24" src="../../../images/back.gif" border="0" alt="[back]"></a>
<a href="mailto:www@openbsd.org">www@openbsd.org</a>
<br>
<small>
<!--
Originally [OpenBSD: options.html,v 1.22 ]<br>
$Translation: options.html,v 1.24 2009/11/05 15:45:47 benoit Exp $<br>
-->
$OpenBSD: options.html,v 1.23 2009/11/07 07:32:54 ajacoutot Exp $
</small>

</body>
</html> 
